<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portal Interativo de Ensaios de Solos – Volume 1</title>
  <meta name="description" content="Curso interativo para iniciantes em ensaios de solos (ABNT). Volume 1: Umidade Natural e Granulometria (peneiramento + sedimentação).">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    :root{
      --blue:#013C5A; --gray:#666666; --green:#28a745; --white:#FFFFFF;
      --bg:#f6f8fb; --radius:16px; --shadow: 0 10px 30px rgba(1,60,90,.12);
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{margin:0;background:var(--bg);color:#1b1f23;font-family:'Open Sans',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;line-height:1.6}
    /* Top nav */
    header.site{
      position:sticky; top:0; z-index:1000;
      background:linear-gradient(0deg, rgba(255,255,255,.75), rgba(255,255,255,.9));
      border-bottom:1px solid rgba(1,60,90,.08);
      backdrop-filter:saturate(160%) blur(8px);
    }
    .topbar{max-width:1100px;margin:0 auto;padding:10px 16px;display:flex;align-items:center;gap:16px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;color:var(--blue);letter-spacing:.2px}
    .brand svg{width:28px;height:28px}
    nav{margin-left:auto;display:flex;gap:8px;flex-wrap:wrap}
    nav a{padding:8px 12px;border-radius:12px;text-decoration:none;color:var(--blue);font-weight:700;font-size:.94rem}
    nav a:hover{background:rgba(1,60,90,.08)}
    nav a.active{background:var(--blue);color:#fff}
    /* Hero */
    .hero{max-width:1100px;margin:24px auto 0;padding:0 16px 8px}
    .hero .card{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);padding:22px;display:flex;gap:18px;align-items:center;flex-wrap:wrap}
    .hero h1{margin:0;font-family:Montserrat,sans-serif;color:var(--blue)}
    .hero p{margin:.25rem 0 0;color:var(--gray)}
    .badge{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;background:#e8f5ee;color:var(--green);border-radius:999px;font-weight:800;font-size:.82rem}
    /* Sections */
    section.module{max-width:1100px;margin:18px auto;padding:0 16px}
    .panel{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);padding:24px}
    header.module-head{display:flex;align-items:center;gap:12px;margin-bottom:10px}
    header.module-head h2{margin:0;font-family:Montserrat,sans-serif;color:var(--blue)}
    .tag{display:inline-flex;gap:6px;align-items:center;padding:4px 8px;background:rgba(1,60,90,.06);color:var(--blue);border-radius:8px;font-weight:700;font-size:.8rem}
    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width: 900px){ .grid{grid-template-columns:1.2fr .8fr} }
    .steps{display:flex;flex-direction:column;gap:10px}
    .step{position:relative;display:flex;gap:12px;align-items:flex-start;padding:12px;border:1px dashed rgba(1,60,90,.15);border-radius:12px}
    .step .num{min-width:28px;height:28px;border-radius:999px;background:var(--blue);color:#fff;display:grid;place-items:center;font-weight:800;font-size:.9rem}
    .note{background:#fff9e6;border:1px solid #ffe5a3;border-radius:12px;padding:12px;font-size:.95rem}
    .actions{display:flex;justify-content:space-between;gap:10px;margin-top:16px;flex-wrap:wrap}
    .btn{appearance:none;border:none;cursor:pointer;font-weight:800;padding:10px 14px;border-radius:12px;display:inline-flex;align-items:center;gap:8px;box-shadow:0 6px 20px rgba(0,0,0,.08);text-decoration:none}
    .btn-prev{background:#eef4f7;color:var(--blue)}
    .btn-next{background:var(--green);color:#fff}
    footer.site{max-width:1100px;margin:10px auto 24px;padding:0 16px;color:var(--gray);font-size:.9rem}
    /* Forms / tables */
    .ck{margin-left:auto;width:20px;height:20px}
    .calc label{display:block;margin:6px 0}
    .calc input{width:100%;padding:8px 10px;border:1px solid rgba(1,60,90,.25);border-radius:10px}
    .calc button{margin-top:8px}
    table.data{width:100%;border-collapse:collapse;font-size:.95rem}
    table.data th, table.data td{padding:8px;border:1px solid rgba(1,60,90,.15)}
    table.data thead tr{background:#eef4f7}
    /* Visual placeholder */
    .visual{border:1px solid rgba(1,60,90,.1);border-radius:12px;padding:12px;display:grid;place-items:center;min-height:180px;background:linear-gradient(180deg,#fff,#f8fbff)}
    /* Accessibility */
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    /* Chart container */
    .chart-wrap{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}
    .chart-svg{width:100%;height:360px;display:block;border:1px solid rgba(1,60,90,.15);border-radius:12px;background:linear-gradient(180deg,#fff,#f9fbff)}
    .chart-legend{display:flex;gap:12px;align-items:center;margin-top:8px;font-size:.9rem}
    .chip{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;background:#eef4f7;color:var(--blue);font-weight:700}
  </style>
</head>
<body>
  <!-- SVG sprite -->
  <svg class="sr-only" xmlns="http://www.w3.org/2000/svg">
    <symbol id="ico-lab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M10 2v6l-6 10a3 3 0 0 0 2.6 4.5h10.8A3 3 0 0 0 20 18L14 8V2"/>
      <path d="M8 14h8"/>
    </symbol>
    <symbol id="ico-home" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M3 10.5 12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1z"/>
    </symbol>
    <symbol id="ico-index" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <rect x="3" y="4" width="18" height="16" rx="2"/><path d="M7 8h10M7 12h10M7 16h6"/>
    </symbol>
    <symbol id="ico-arrow-left" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M15 18l-6-6 6-6"/>
    </symbol>
    <symbol id="ico-arrow-right" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M9 6l6 6-6 6"/>
    </symbol>
    <symbol id="ico-droplet" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 2s6 7 6 11a6 6 0 0 1-12 0c0-4 6-11 6-11z"/>
    </symbol>
    <symbol id="ico-sieve" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9"/><path d="M5 12h14M12 5v14M7.5 7.5l9 9M16.5 7.5l-9 9"/>
    </symbol>
    <symbol id="ico-whatsapp" viewBox="0 0 24 24" fill="currentColor">
      <path d="M20.5 3.4A10.4 10.4 0 0 0 3.6 20.3L2 22l1.9-.5A10.4 10.4 0 1 0 20.5 3.4Zm-4.1 12.2c-.2.6-1.1 1-1.6 1-1.3.1-2.4-.5-3.8-1.6-1.3-1-2.2-2.3-2.4-3.8 0-.5.2-1 .6-1.3.2-.1.4-.3.6-.3h.4l.4.9c.2.5.4.9.4 1 0 .3-.3.6-.4.7l-.2.3c-.1.1-.1.2 0 .3.3.5.8 1.1 1.4 1.6.6.5 1.3.9 1.8 1.1.1.1.2 0 .3 0l.5-.5c.3-.3.6-.4.9-.3l1.4.4c.2 0 .4.1.5.2.1.1.1.3 0 .5Z"/>
    </symbol>
  </svg>

  <header class="site">
    <div class="topbar" role="navigation" aria-label="Navegação principal">
      <div class="brand" aria-label="Portal Interativo">
        <svg aria-hidden="true"><use href="#ico-lab"/></svg>
        <span>Ensaios de Solos — Vol. 1</span>
      </div>
      <nav>
        <a href="#home" class="nav-link" data-target="#home"><svg width="16" height="16" aria-hidden="true"><use href="#ico-home"/></svg> Início</a>
        <a href="#index" class="nav-link" data-target="#index"><svg width="16" height="16" aria-hidden="true"><use href="#ico-index"/></svg> Índice</a>
        <a href="#mod0" class="nav-link" data-target="#mod0">Módulo 0</a>
        <a href="#mod1" class="nav-link" data-target="#mod1">Módulo 1</a>
        <a href="#mod2" class="nav-link" data-target="#mod2">Módulo 2</a>
        <a href="#mod3" class="nav-link" data-target="#mod3">Módulo 3</a>
        <a href="#mod4" class="nav-link" data-target="#mod4">Módulo 4</a>
      </nav>
    </div>
  </header>

  <div id="home" class="hero" tabindex="-1">
    <div class="card">
      <div class="badge"><svg width="16" height="16" aria-hidden="true"><use href="#ico-lab"/></svg> Portal Interativo</div>
      <div style="flex:1 1 420px">
        <h1>Curso Interativo – Ensaios de Solos (Volume 1)</h1>
        <p>Aprenda na prática: Umidade Natural, Granulometria (peneiramento + sedimentação) e mais. Conteúdo didático para iniciantes, com passo a passo ilustrado.</p>
      </div>
    </div>
  </div>

  <section id="index" class="module" aria-labelledby="indice-title">
    <div class="panel">
      <header class="module-head"><svg width="22" height="22" aria-hidden="true"><use href="#ico-index"/></svg><h2 id="indice-title">Índice</h2></header>
      <div class="grid">
        <div>
          <ol class="steps" style="margin:0">
            <li class="step"><span class="num">0</span><div><strong>Introdução e contexto</strong><br/>O que faz um laboratorista de solos. Mercado e oportunidades.</div></li>
            <li class="step"><span class="num">1</span><div><strong>Teor de Umidade Natural</strong><br/>Coleta, pesagem, secagem em estufa e cálculo.</div></li>
            <li class="step"><span class="num">2</span><div><strong>Granulometria</strong><br/>Peneiramento (areia/pedregulho) e sedimentação (silte/argila).</div></li>
            <li class="step"><span class="num">3</span><div><strong>Aula ao Vivo</strong><br/>Mentoria e agendamento via WhatsApp.</div></li>
            <li class="step"><span class="num">4</span><div><strong>Conclusão + Próximos Passos</strong><br/>CTA para Volume 2 (Massa Específica Real dos Grãos e Limites de Atterberg).</div></li>
          </ol>
        </div>
        <div class="visual" aria-hidden="true">
          <svg viewBox="0 0 600 300" xmlns="http://www.w3.org/2000/svg">
            <defs><linearGradient id="g1" x1="0" x2="1" y1="0" y2="1"><stop offset="0" stop-color="#e6f2f9"/><stop offset="1" stop-color="#f7fbff"/></linearGradient></defs>
            <rect width="600" height="300" rx="16" fill="url(#g1)"/>
            <g stroke="#013C5A" stroke-width="3" fill="none" opacity=".5">
              <rect x="30" y="30" width="240" height="100" rx="12"/>
              <rect x="330" y="30" width="240" height="100" rx="12"/>
              <rect x="30" y="170" width="240" height="100" rx="12"/>
              <rect x="330" y="170" width="240" height="100" rx="12"/>
            </g>
          </svg>
        </div>
      </div>
    </div>
  </section>

  <!-- ===================== MÓDULO 0 ===================== -->
  <section id="mod0" class="module" aria-labelledby="mod0-title">
    <div class="panel" id="content-mod-0">
      <header class="module-head">
        <span class="tag"><svg width="16" height="16" aria-hidden="true"><use href="#ico-home"/></svg> Módulo 0</span>
        <h2 id="mod0-title">Introdução e contexto da profissão</h2>
      </header>
      <div class="grid">
        <div>
          <div class="steps">
            <div class="step"><span class="num">1</span><div><strong>O papel do laboratorista</strong><br/>Entenda responsabilidades, rotina e impacto dos ensaios na obra.</div></div>
            <div class="step"><span class="num">2</span><div><strong>Onde você pode atuar</strong><br/>Terraplenagem, pavimentação, geotecnia, controle tecnológico.</div></div>
            <div class="step"><span class="num">3</span><div><strong>Boas práticas iniciais</strong><br/>Segurança, organização e rastreabilidade dos resultados.</div></div>
          </div>
          <div class="note" role="note" aria-label="Dica">Dica: mantenha um caderno de campo ou registro digital dos ensaios (amostra, data, massa, resultados e observações).</div>
          <div class="actions">
            <a class="btn btn-prev" href="#index"><svg width="18" height="18" aria-hidden="true"><use href="#ico-arrow-left"/></svg> Voltar</a>
            <a class="btn btn-next" href="#mod1">Avançar <svg width="18" height="18" aria-hidden="true"><use href="#ico-arrow-right"/></svg></a>
          </div>
        </div>
        <div class="visual" aria-hidden="true">
          <svg viewBox="0 0 600 360" xmlns="http://www.w3.org/2000/svg">
            <rect width="600" height="360" rx="16" fill="#e9f2f6"/>
            <g transform="translate(90,60)" stroke="#013C5A" stroke-width="3" fill="none">
              <rect x="0" y="0" width="420" height="240" rx="14" fill="#fff"/>
              <circle cx="80" cy="90" r="42" fill="#f5fbff"/>
              <path d="M150 140h210M150 110h180M150 170h180"/>
            </g>
          </svg>
        </div>
      </div>
    </div>
  </section>

  <!-- ===================== MÓDULO 1 ===================== -->
  <section id="mod1" class="module" aria-labelledby="mod1-title">
   <div class="panel" id="content-mod-1">
  <!-- Estilos locais só deste módulo (não quebram o resto) -->
  <style>
    #content-mod-1 .step { gap:12px; align-items:flex-start; }
    #content-mod-1 .step .num { margin-top:4px; }
    #content-mod-1 .step-body { display:block; width:100%; }
    #content-mod-1 .illus { display:grid; place-items:center; margin:2px 0 10px; }
    #content-mod-1 .illus svg { width:88px; height:88px; transition:transform .2s ease; }
    #content-mod-1 .step:hover .illus svg { transform: translateY(-2px); }
    #content-mod-1 h3 { color:#013C5A; font-family:Montserrat, sans-serif; margin-top:16px; }
  </style>

  <header class="module-head">
    <span class="tag"><svg width="16" height="16" aria-hidden="true"><use href="#ico-droplet"/></svg> Módulo 1</span>
    <h2 id="mod1-title">Ensaio de Teor de Umidade Natural (NBR 6457 / NBR 6458)</h2>
  </header>

  <div class="grid">
    <div>
      <!-- INTRODUÇÃO -->
      <p><strong>Objetivo:</strong> Determinar a quantidade de água presente no solo em seu estado natural. Essa informação é essencial para avaliar a consistência, a compactação e o comportamento mecânico do solo em campo e laboratório.</p>

      <div class="note">Conceito: O teor de umidade (<em>w</em>) é a razão entre a massa da água e a massa dos sólidos secos do solo, expressa em porcentagem.</div>

      <!-- EXECUÇÃO PASSO A PASSO COM ÍCONES 3D FLAT -->
      <h3>Procedimento passo a passo</h3>
      <div class="steps">

        <!-- PASSO 1: CADERNETA (identificação) -->
        <div class="step">
          <span class="num">1</span>
          <div class="step-body">
            <div class="illus" aria-hidden="true">
              <!-- Ícone: Caderneta de campo -->
              <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" role="img">
                <defs>
                  <linearGradient id="cadernoA" x1="0" y1="0" x2="1" y2="1">
                    <stop offset="0" stop-color="#e6f2f9"/><stop offset="1" stop-color="#f7fbff"/>
                  </linearGradient>
                </defs>
                <rect x="16" y="18" width="88" height="84" rx="12" fill="url(#cadernoA)" stroke="#013C5A" stroke-opacity=".12"/>
                <rect x="24" y="22" width="72" height="76" rx="10" fill="#ffffff" stroke="#013C5A" stroke-opacity=".10"/>
                <!-- espiral -->
                <g fill="#013C5A" opacity=".25">
                  <rect x="28" y="18" width="6" height="12" rx="2"/>
                  <rect x="40" y="18" width="6" height="12" rx="2"/>
                  <rect x="52" y="18" width="6" height="12" rx="2"/>
                  <rect x="64" y="18" width="6" height="12" rx="2"/>
                  <rect x="76" y="18" width="6" height="12" rx="2"/>
                  <rect x="88" y="18" width="6" height="12" rx="2"/>
                </g>
                <!-- linhas -->
                <g stroke="#013C5A" stroke-opacity=".25">
                  <line x1="30" y1="42" x2="96" y2="42"/>
                  <line x1="30" y1="54" x2="96" y2="54"/>
                  <line x1="30" y1="66" x2="96" y2="66"/>
                  <line x1="30" y1="78" x2="96" y2="78"/>
                  <line x1="30" y1="90" x2="84" y2="90"/>
                </g>
                <!-- marcador verde -->
                <rect x="84" y="36" width="8" height="12" rx="2" fill="#28a745" opacity=".8"/>
              </svg>
            </div>
            <div><strong>Identificação da amostra</strong><br/>Numere a lata e registre o código da amostra e a data. Pese e anote a tara (<em>m<sub>lata</sub></em>).</div>
            <input type="checkbox" class="ck" data-key="m1_ck1">
          </div>
        </div>

        <!-- PASSO 2: BALANÇA + CÁPSULA (pesagem úmida) -->
        <div class="step">
          <span class="num">2</span>
          <div class="step-body">
            <div class="illus" aria-hidden="true">
              <!-- Ícone: Balança com cápsula -->
              <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" role="img">
                <defs>
                  <linearGradient id="balancaA" x1="0" y1="0" x2="1" y2="1">
                    <stop offset="0" stop-color="#eaf4fb"/><stop offset="1" stop-color="#f8fbff"/>
                  </linearGradient>
                </defs>
                <!-- base -->
                <rect x="18" y="74" width="84" height="22" rx="8" fill="#013C5A" opacity=".08"/>
                <!-- plataforma -->
                <rect x="26" y="62" width="68" height="12" rx="6" fill="url(#balancaA)" stroke="#013C5A" stroke-opacity=".12"/>
                <!-- corpo -->
                <rect x="22" y="30" width="76" height="34" rx="8" fill="#ffffff" stroke="#013C5A" stroke-opacity=".1"/>
                <!-- visor -->
                <rect x="32" y="38" width="40" height="10" rx="4" fill="#e6f2f9"/>
                <rect x="76" y="38" width="16" height="10" rx="3" fill="#28a745" opacity=".9"/>
                <!-- cápsula -->
                <ellipse cx="60" cy="58" rx="18" ry="6" fill="#cfd8df"/>
                <ellipse cx="60" cy="56" rx="18" ry="6" fill="#e9eef2"/>
                <path d="M46 50c3-4 25-4 28 0v5c-3 3-25 3-28 0z" fill="#dfe7ec"/>
              </svg>
            </div>
            <div><strong>Pesagem úmida</strong><br/>Coloque o solo natural na lata, feche a tampa e pese o conjunto (<em>m<sub>úmida</sub></em> = lata + solo úmido).</div>
            <input type="checkbox" class="ck" data-key="m1_ck2">
          </div>
        </div>

        <!-- PASSO 3: ESTUFA (secagem) -->
        <div class="step">
          <span class="num">3</span>
          <div class="step-body">
            <div class="illus" aria-hidden="true">
              <!-- Ícone: Estufa de laboratório -->
              <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" role="img">
                <defs>
                  <linearGradient id="estufaA" x1="0" y1="0" x2="1" y2="1">
                    <stop offset="0" stop-color="#f0f6fa"/><stop offset="1" stop-color="#ffffff"/>
                  </linearGradient>
                </defs>
                <rect x="22" y="24" width="76" height="72" rx="10" fill="url(#estufaA)" stroke="#013C5A" stroke-opacity=".12"/>
                <!-- porta -->
                <rect x="30" y="32" width="60" height="56" rx="6" fill="#ffffff" stroke="#013C5A" stroke-opacity=".08"/>
                <circle cx="36" cy="60" r="6" fill="#013C5A" opacity=".15"/>
                <!-- prateleira -->
                <rect x="36" y="56" width="48" height="4" rx="2" fill="#e6eef4"/>
                <!-- cápsula dentro -->
                <ellipse cx="64" cy="66" rx="12" ry="4" fill="#cfd8df"/>
                <ellipse cx="64" cy="64" rx="12" ry="4" fill="#e9eef2"/>
                <!-- termômetro -->
                <rect x="78" y="38" width="6" height="24" rx="3" fill="#e6eef4"/>
                <circle cx="81" cy="64" r="5" fill="#28a745" opacity=".9"/>
              </svg>
            </div>
            <div><strong>Secagem</strong><br/>Leve a amostra à estufa a 105–110 °C até massa constante (mínimo 12 h). Retire e deixe resfriar no dessecador.</div>
            <input type="checkbox" class="ck" data-key="m1_ck3">
          </div>
        </div>

        <!-- PASSO 4: BALANÇA (pesagem seca) -->
        <div class="step">
          <span class="num">4</span>
          <div class="step-body">
            <div class="illus" aria-hidden="true">
              <!-- Ícone: Balança (variação) -->
              <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" role="img">
                <defs>
                  <linearGradient id="balancaB" x1="0" y1="0" x2="1" y2="1">
                    <stop offset="0" stop-color="#eaf4fb"/><stop offset="1" stop-color="#f8fbff"/>
                  </linearGradient>
                </defs>
                <rect x="20" y="76" width="80" height="20" rx="8" fill="#013C5A" opacity=".08"/>
                <rect x="28" y="64" width="64" height="12" rx="6" fill="url(#balancaB)" stroke="#013C5A" stroke-opacity=".12"/>
                <rect x="24" y="34" width="72" height="30" rx="8" fill="#ffffff" stroke="#013C5A" stroke-opacity=".1"/>
                <rect x="34" y="41" width="48" height="10" rx="4" fill="#e6f2f9"/>
                <!-- cápsula (seca) -->
                <ellipse cx="60" cy="60" rx="16" ry="5" fill="#ccd6dd"/>
                <ellipse cx="60" cy="58" rx="16" ry="5" fill="#e9eef2"/>
              </svg>
            </div>
            <div><strong>Pesagem seca</strong><br/>Após o resfriamento, pese o conjunto (<em>m<sub>seca</sub></em> = lata + solo seco) e calcule o teor de umidade usando a calculadora.</div>
            <input type="checkbox" class="ck" data-key="m1_ck4">
          </div>
        </div>
      </div>

      <!-- INTERPRETAÇÃO -->
      <h3>Interpretação dos resultados</h3>
      <p>O resultado médio (<em>w̄</em>) representa a umidade natural do solo. Valores elevados indicam solos mais plásticos e compressíveis; baixos valores são típicos de solos arenosos. Para controle de qualidade, o desvio entre determinações não deve ultrapassar <strong>1 %</strong>.</p>

      <div class="note">Boas práticas: Evite correntes de ar durante a pesagem, use luvas limpas e registre sempre a identificação da amostra, operador e data do ensaio.</div>

      <div class="actions">
        <a class="btn btn-prev" href="#mod0"><svg width="18" height="18" aria-hidden="true"><use href="#ico-arrow-left"/></svg> Voltar</a>
        <a class="btn btn-next" href="#mod2">Avançar <svg width="18" height="18" aria-hidden="true"><use href="#ico-arrow-right"/></svg></a>
      </div>
    </div>

    <!-- CALCULADORAS + ÍCONE TRIPLA DETERMINAÇÃO -->
    <div>
      <div class="panel" style="padding:16px">
        <h3 style="margin-top:0;color:#0f2532;font-family:Montserrat">Calculadora — Teor de Umidade (w)</h3>
        <form class="calc" onsubmit="return false;">
          <label>Tara (lata vazia) — <code>m<sub>lata</sub></code>
            <input type="number" step="0.01" id="m_lata" placeholder="g" />
          </label>
          <label>Lata + solo úmido — <code>m<sub>úmida</sub></code>
            <input type="number" step="0.01" id="m_umida" placeholder="g" />
          </label>
          <label>Lata + solo seco — <code>m<sub>seca</sub></code>
            <input type="number" step="0.01" id="m_seca" placeholder="g" />
          </label>
          <div class="note" style="margin:10px 0">Fórmula: <strong>w = (m<sub>água</sub> / m<sub>solo seco</sub>) × 100%</strong><br>Onde m<sub>água</sub> = m<sub>úmida</sub> − m<sub>seca</sub>; m<sub>solo seco</sub> = m<sub>seca</sub> − m<sub>lata</sub>.</div>
          <button class="btn btn-next" onclick="calcUmidade()">Calcular w</button>
          <p id="w_result" style="font-weight:800;margin-top:10px"></p>
        </form>

        <hr style="border:none;border-top:1px solid rgba(1,60,90,.1);margin:14px 0"/>
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:6px">
          <!-- Ícone: Três cápsulas (tripla determinação) -->
          <svg width="40" height="40" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <ellipse cx="30" cy="78" rx="16" ry="5" fill="#cfd8df"/><ellipse cx="30" cy="76" rx="16" ry="5" fill="#e9eef2"/>
            <ellipse cx="60" cy="78" rx="16" ry="5" fill="#cfd8df"/><ellipse cx="60" cy="76" rx="16" ry="5" fill="#e9eef2"/>
            <ellipse cx="90" cy="78" rx="16" ry="5" fill="#cfd8df"/><ellipse cx="90" cy="76" rx="16" ry="5" fill="#e9eef2"/>
          </svg>
          <h4 style="margin:0;color:#0f2532;font-family:Montserrat">Tripla determinação (opcional)</h4>
        </div>
        <p style="margin:0">Informe <em>w₁, w₂, w₃</em> para calcular média e desvio.</p>
        <form class="calc" onsubmit="return false;" style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin-top:8px">
          <input type="number" step="0.01" id="w1" placeholder="w1 %" />
          <input type="number" step="0.01" id="w2" placeholder="w2 %" />
          <input type="number" step="0.01" id="w3" placeholder="w3 %" />
          <button class="btn btn-prev" style="grid-column:1/4" onclick="calcTripla()">Calcular média</button>
        </form>
        <p id="w_stats" style="font-weight:800;margin-top:6px"></p>
      </div>
    </div>
  </div>
</div>

  </section>
  
<!-- ===================== MÓDULO 2 ===================== -->
<section id="mod2" class="module" aria-labelledby="mod2-title">
<div class="panel" id="content-mod-2">
  <!-- Estilos locais do Módulo 2 -->
  <style>
    #content-mod-2 .step { gap:12px; align-items:flex-start; }
    #content-mod-2 .step .num { margin-top:4px; }
    #content-mod-2 .step-body { display:block; width:100%; }
    #content-mod-2 .illus { display:grid; place-items:center; margin:2px 0 10px; }
    #content-mod-2 .illus svg { width:92px; height:92px; transition: transform .2s ease; }
    #content-mod-2 .step:hover .illus svg { transform: translateY(-2px); }
    #content-mod-2 h3 { color:#013C5A; font-family:Montserrat,sans-serif; margin-top:16px; }
    #content-mod-2 .sub { color:#666; margin-top:0; }
    #content-mod-2 .split-visual svg { width:100%; max-width:520px; height:auto; }
    #content-mod-2 .fields label { display:block; font-weight:600; margin:8px 0 4px; color:#0f2532; }
    #content-mod-2 .fields textarea { width:100%; min-height:70px; border:1px solid rgba(1,60,90,.2); border-radius:10px; padding:10px; }
  </style>

  <header class="module-head">
    <span class="tag"><svg width="16" height="16" aria-hidden="true"><use href="#ico-sieve"/></svg> Módulo 2</span>
    <h2 id="mod2-title">Granulometria (NBR 7181) — Peneiramento + Sedimentação</h2>
  </header>

  <div class="grid">
    <div>
      <!-- Intro + resumo visual -->
      <p class="sub"><strong>Objetivo:</strong> Determinar a distribuição granulométrica combinando <em>peneiramento</em> (≥ 2 mm) e <em>sedimentação com densímetro</em> (≤ 2 mm), seguindo a NBR 7181, em linguagem simples e visual.</p>

      <div class="panel split-visual" style="padding:12px; margin-bottom:12px">
        <h3 style="margin:6px 0 8px">Resumo visual — Divisão da amostra (2 kg)</h3>
        <!-- Ilustração: 2 kg -> 1 kg A (peneiramento) | 1 kg B (sedimentação) -->
        <svg viewBox="0 0 720 180" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Divisão: 2 kg → 1 kg peneiramento + 1 kg sedimentação">
          <defs>
            <linearGradient id="gBox" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#e6f2f9"/><stop offset="1" stop-color="#f7fbff"/>
            </linearGradient>
          </defs>
          <rect x="20" y="30" width="200" height="120" rx="14" fill="url(#gBox)" stroke="#013C5A" stroke-opacity=".12"/>
          <text x="120" y="60" text-anchor="middle" font-size="14" fill="#013C5A">Amostra total</text>
          <text x="120" y="82" text-anchor="middle" font-size="16" font-weight="700" fill="#013C5A">2 kg</text>

          <!-- setas -->
          <path d="M220 90h70" stroke="#013C5A" stroke-width="2"/>
          <path d="M290 86l8 4-8 4z" fill="#013C5A"/>
          <path d="M220 90h70" transform="translate(0,30)" stroke="#013C5A" stroke-width="2" opacity=".5"/>
          <path d="M290 116l8 4-8 4z" fill="#013C5A" opacity=".5"/>

          <!-- caixas destino -->
          <rect x="300" y="30" width="180" height="120" rx="14" fill="#ffffff" stroke="#013C5A" stroke-opacity=".12"/>
          <text x="390" y="60" text-anchor="middle" font-size="14" fill="#013C5A">Parte A — Peneiramento</text>
          <text x="390" y="82" text-anchor="middle" font-size="16" font-weight="700" fill="#28a745">1 kg (≥ 2 mm)</text>

          <rect x="520" y="30" width="180" height="120" rx="14" fill="#ffffff" stroke="#013C5A" stroke-opacity=".12"/>
          <text x="610" y="60" text-anchor="middle" font-size="14" fill="#013C5A">Parte B — Sedimentação</text>
          <text x="610" y="82" text-anchor="middle" font-size="16" font-weight="700" fill="#28a745">1 kg (≤ 2 mm)</text>
        </svg>
      </div>

      <!-- ===================== PARTE A — PENEIRAMENTO (≥ 2 mm) ===================== -->
      <h3>Parte A — Peneiramento (≥ 2 mm)</h3>
      <p class="sub">Determinação da fração grossa do solo. Siga a série de peneiras conforme NBR 7181 (da maior para a menor até 2,0 mm).</p>

      <div class="steps">
        <!-- A1 Secagem -->
        <div class="step">
          <span class="num">A1</span>
          <div class="step-body">
            <div class="illus" aria-hidden="true">
              <!-- Estufa -->
              <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
                <rect x="22" y="24" width="76" height="72" rx="10" fill="#f0f6fa" stroke="#013C5A" stroke-opacity=".12"/>
                <rect x="30" y="32" width="60" height="56" rx="6" fill="#ffffff" stroke="#013C5A" stroke-opacity=".08"/>
                <rect x="36" y="56" width="48" height="4" rx="2" fill="#e6eef4"/>
                <circle cx="81" cy="64" r="6" fill="#28a745" opacity=".9"/>
              </svg>
            </div>
            <div><strong>Secagem</strong><br/>Leve <em>1 kg</em> de solo à estufa (105 °C ± 5 °C) até massa constante. Deixe esfriar no dessecador.</div>
            <input type="checkbox" class="ck" data-key="m2_ck1">
          </div>
        </div>

        <!-- A2 Tara peneiras -->
        <div class="step">
          <span class="num">A2</span>
          <div class="step-body">
            <div class="illus" aria-hidden="true">
              <!-- Peneira isolada -->
              <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
                <ellipse cx="60" cy="72" rx="30" ry="10" fill="#e9eef2"/>
                <ellipse cx="60" cy="70" rx="30" ry="10" fill="#cfd8df"/>
                <rect x="30" y="50" width="60" height="20" rx="10" fill="#dfe7ec"/>
              </svg>
            </div>
            <div><strong>Pesagem das peneiras (tara)</strong><br/>Pese cada peneira limpa e registre a tara individual.</div>
            <input type="checkbox" class="ck" data-key="m2_ck2">
          </div>
        </div>

        <!-- A3 Torre de peneiras -->
        <div class="step">
          <span class="num">A3</span>
          <div class="step-body">
            <div class="illus" aria-hidden="true">
              <!-- Torre -->
              <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
                <g opacity=".95">
                  <ellipse cx="60" cy="88" rx="28" ry="9" fill="#cfd8df"/>
                  <ellipse cx="60" cy="86" rx="28" ry="9" fill="#e9eef2"/>
                  <ellipse cx="60" cy="70" rx="26" ry="8" fill="#cfd8df"/>
                  <ellipse cx="60" cy="68" rx="26" ry="8" fill="#e9eef2"/>
                  <ellipse cx="60" cy="52" rx="24" ry="7" fill="#cfd8df"/>
                  <ellipse cx="60" cy="50" rx="24" ry="7" fill="#e9eef2"/>
                </g>
              </svg>
            </div>
            <div><strong>Montagem do conjunto</strong><br/>Monte da maior (≈ 50 mm) para a menor até <strong>2,0 mm</strong> + fundo coletor.</div>
            <input type="checkbox" class="ck" data-key="m2_ck3">
          </div>
        </div>

        <!-- A4 Peneiramento -->
        <div class="step">
          <span class="num">A4</span>
          <div class="step-body">
            <div class="illus" aria-hidden="true">
              <!-- Agitador -->
              <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
                <rect x="30" y="34" width="60" height="16" rx="8" fill="#f0f6fa" stroke="#013C5A" stroke-opacity=".12"/>
                <rect x="22" y="52" width="76" height="10" rx="5" fill="#e6eef4"/>
                <rect x="18" y="64" width="84" height="20" rx="8" fill="#013C5A" opacity=".08"/>
              </svg>
            </div>
            <div><strong>Peneiramento</strong><br/>Coloque a amostra na peneira superior e agite por ~10 min (agitador ou manual). Evite perdas de solo.</div>
            <input type="checkbox" class="ck" data-key="m2_ck4">
          </div>
        </div>

        <!-- A5 Pesagem pós-ensaio -->
        <div class="step">
          <span class="num">A5</span>
          <div class="step-body">
            <div class="illus" aria-hidden="true">
              <!-- Balança com peneira -->
              <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
                <rect x="26" y="70" width="68" height="12" rx="6" fill="#f0f6fa" stroke="#013C5A" stroke-opacity=".12"/>
                <rect x="22" y="40" width="76" height="30" rx="8" fill="#ffffff" stroke="#013C5A" stroke-opacity=".1"/>
                <rect x="32" y="46" width="40" height="10" rx="4" fill="#e6f2f9"/>
                <ellipse cx="60" cy="66" rx="20" ry="6" fill="#cfd8df"/><ellipse cx="60" cy="64" rx="20" ry="6" fill="#e9eef2"/>
              </svg>
            </div>
            <div><strong>Pesagem pós-ensaio</strong><br/>Pese cada peneira com o material retido e calcule a <em>massa retida</em> (peso com solo – tara).</div>
            <input type="checkbox" class="ck" data-key="m2_ck5">
          </div>
        </div>

        <!-- A6 Lavagem final -->
        <div class="step">
          <span class="num">A6</span>
          <div class="step-body">
            <div class="illus" aria-hidden="true">
              <!-- Peneira com água -->
              <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
                <ellipse cx="60" cy="74" rx="28" ry="9" fill="#cfd8df"/>
                <ellipse cx="60" cy="72" rx="28" ry="9" fill="#e9eef2"/>
                <path d="M38 62c10 2 36 2 44 0v6c-10 4-34 4-44 0z" fill="#bfe6ff"/>
                <path d="M84 50c-2 3-4 6-4 9 0 3 2 5 5 5 3 0 5-3 5-6 0-4-3-6-6-8z" fill="#28a745" opacity=".6"/>
              </svg>
            </div>
            <div><strong>Lavagem final</strong><br/>Passe a fração passante na peneira 0,075 mm até a água sair clara. Seque o material retido antes de seguir.</div>
            <input type="checkbox" class="ck" data-key="m2_ck6">
          </div>
        </div>
      </div>

      <h3>Cálculos — Parte A</h3>
      <p class="sub">Use a tabela abaixo para calcular <strong>% Retida</strong> e <strong>% Passante acumulada</strong>. Em seguida gere a curva semi-log.</p>
      <!-- (Mantemos a tabela e botões originais/IDs) -->
    </div>

    <!-- COLUNA DIREITA — Tabelas e Curva (mantém IDs e botões originais) -->
    <div>
      <div class="panel" style="padding:16px">
        <h3 style="margin-top:0;color:#0f2532;font-family:Montserrat">Tabela — Peneiramento</h3>
        <p style="margin:0 0 8px">Informe massa retida por peneira. O sistema calcula % retido e % passante acumulado.</p>
        <table id="tbPeneiras" class="data">
          <thead>
            <tr><th style="text-align:left">Abertura</th><th style="text-align:right">Massa retida (g)</th><th style="text-align:right">% retido</th><th style="text-align:right">% passante acum.</th></tr>
          </thead>
          <tbody></tbody>
        </table>
        <div style="display:flex; gap:8px; margin-top:10px; flex-wrap:wrap">
          <button class="btn btn-prev" onclick="initPeneiras()">Carregar peneiras padrão</button>
          <button class="btn btn-next" onclick="calcPeneiras()">Calcular distribuição</button>
        </div>
        <p id="sumPeneiras" style="font-weight:800; margin-top:6px"></p>

        <hr style="border:none;border-top:1px solid rgba(1,60,90,.1);margin:14px 0"/>
        <h3 style="margin:0 0 8px;color:#0f2532;font-family:Montserrat">Leituras — Sedimentação (hidrômetro)</h3>
        <p style="margin:0 0 8px">Registre tempo (s/min/h) · leitura (g/L aprox.) · temperatura (°C). Se desejar, aplique correções (menisco/temperatura) no campo avançado do conversor.</p>
        <table id="tbHidro" class="data">
          <thead><tr><th>Tempo</th><th>Leitura</th><th>Temperatura (°C)</th></tr></thead>
          <tbody></tbody>
        </table>
        <div style="display:flex; gap:8px; margin-top:10px; flex-wrap:wrap">
          <button class="btn btn-prev" onclick="initHidro()">Carregar tempos padrão</button>
          <button class="btn btn-next" onclick="saveHidro()">Salvar leituras</button>
        </div>
        <p id="sumHidro" style="font-weight:800; margin-top:6px"></p>

        <hr style="border:none;border-top:1px solid rgba(1,60,90,.1);margin:16px 0"/>
        <h3 style="margin:0 0 8px;color:#0f2532;font-family:Montserrat">Conversão & Curva (simplificada)</h3>
        <p style="margin:0 0 10px">Converta as leituras do hidrômetro em <em>% passante</em> e una com o peneiramento para gerar a curva granulométrica.</p>
        <div class="panel" style="padding:12px">
          <form class="calc" onsubmit="return false;">
            <div style="display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px">
              <label>Massa da amostra fina (W<sub>s</sub>, g)<input type="number" step="0.01" id="ws" placeholder="70 ou 120"></label>
              <label>Densidade relativa (G<sub>s</sub>)<input type="number" step="0.01" id="gs" value="2.65"></label>
              <label>Temperatura (°C)<input type="number" step="0.1" id="temp" value="20"></label>
              <label>Profundidade efetiva L (m)<input type="number" step="0.001" id="L" value="0.145"></label>
              <label>Correção de leitura (Ct + Cm)<input type="number" step="0.001" id="corr" value="0"></label>
            </div>
            <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px">
              <button class="btn btn-next" onclick="converterHidro()">Converter hidrômetro</button>
              <button class="btn btn-prev" onclick="gerarCurva()">Gerar curva (A+B)</button>
              <button class="btn" style="background:#fff;color:var(--blue);border:1px solid rgba(1,60,90,.2)" onclick="exportCSV()">Exportar CSV</button>
            </div>
            <p id="convInfo" style="font-weight:800;margin-top:6px"></p>
          </form>
        </div>

        <div class="chart-wrap" style="margin-top:12px">
          <svg id="curvaSVG" class="chart-svg" viewBox="0 0 800 360" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Curva Granulométrica">
            <desc>Semilog X: tamanho (mm) no eixo X; % passante no eixo Y.</desc>
          </svg>
          <div class="chart-legend">
            <span class="chip">Peneiramento</span>
            <span class="chip" style="background:#e8f5ee;color:#2a7f3e">Sedimentação</span>
            <span class="chip" style="background:#013C5A;color:white">Curva combinada</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===================== PARTE B — SEDIMENTAÇÃO (≤ 2 mm) ===================== -->
  <div class="panel" style="margin-top:12px">
    <h3>Parte B — Sedimentação (≤ 2,0 mm)</h3>
    <p class="sub"><strong>Amostra:</strong> da fração passante em 2,0 mm, separe <strong>70 g</strong> (argilosa/siltosa) ou <strong>120 g</strong> (arenosa).</p>

    <div class="steps">
      <!-- B1 Béquer + defloculante + pH -->
      <div class="step">
        <span class="num">B1</span>
        <div class="step-body">
          <div class="illus" aria-hidden="true">
            <!-- Béquer + pH -->
            <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
              <rect x="28" y="28" width="64" height="64" rx="10" fill="#f0f6fa" stroke="#013C5A" stroke-opacity=".12"/>
              <path d="M44 44h40v24c-10 6-30 6-40 0z" fill="#bfe6ff"/>
              <rect x="82" y="36" width="6" height="28" rx="3" fill="#e6eef4"/>
              <circle cx="85" cy="66" r="5" fill="#28a745" opacity=".9"/>
            </svg>
          </div>
          <div><strong>Preparo da suspensão</strong><br/>Adicionar solução de hexametafosfato e ajustar com carbonato até pH ~8–9 (usar tiras de pH).</div>
          <input type="checkbox" class="ck" data-key="m2_ck7">
        </div>
      </div>

      <!-- B2 Imersão 12–24h -->
      <div class="step">
        <span class="num">B2</span>
        <div class="step-body">
          <div class="illus" aria-hidden="true">
            <!-- Relógio / repouso -->
            <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
              <circle cx="60" cy="60" r="30" fill="#f0f6fa" stroke="#013C5A" stroke-opacity=".12"/>
              <line x1="60" y1="60" x2="60" y2="42" stroke="#013C5A" stroke-width="3" opacity=".5"/>
              <line x1="60" y1="60" x2="76" y2="60" stroke="#013C5A" stroke-width="3" opacity=".5"/>
            </svg>
          </div>
          <div><strong>Imersão</strong><br/>Colocar a amostra no béquer e deixar agir <strong>12–24 h</strong>. Anotar horários.</div>
          <input type="checkbox" class="ck" data-key="m2_ck8">
        </div>
      </div>

      <!-- B3 Dispersor 15 min -->
      <div class="step">
        <span class="num">B3</span>
        <div class="step-body">
          <div class="illus" aria-hidden="true">
            <!-- Dispersor -->
            <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
              <rect x="30" y="34" width="60" height="16" rx="8" fill="#f0f6fa" stroke="#013C5A" stroke-opacity=".12"/>
              <rect x="28" y="52" width="64" height="26" rx="6" fill="#ffffff" stroke="#013C5A" stroke-opacity=".08"/>
              <rect x="48" y="58" width="24" height="14" rx="4" fill="#28a745" opacity=".9"/>
            </svg>
          </div>
          <div><strong>Dispersão mecânica</strong><br/>Levar ao dispersor por ~15 min (evitar excesso para não quebrar grãos).</div>
          <input type="checkbox" class="ck" data-key="m2_ck9">
        </div>
      </div>

      <!-- B4 Transferência → proveta 1L -->
      <div class="step">
        <span class="num">B4</span>
        <div class="step-body">
          <div class="illus" aria-hidden="true">
            <!-- Proveta 1L -->
            <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
              <rect x="50" y="22" width="20" height="76" rx="8" fill="#f0f6fa" stroke="#013C5A" stroke-opacity=".12"/>
              <rect x="52" y="28" width="16" height="54" rx="6" fill="#bfe6ff"/>
              <rect x="52" y="82" width="16" height="8" rx="3" fill="#e6eef4"/>
            </svg>
          </div>
          <div><strong>Transferência e volume</strong><br/>Transferir toda a suspensão para a proveta de 1 000 mL, lavar o béquer/haste e completar até a marca.</div>
          <input type="checkbox" class="ck" data-key="m2_ck10">
        </div>
      </div>

      <!-- B5 Agitação 1 min -->
      <div class="step">
        <span class="num">B5</span>
        <div class="step-body">
          <div class="illus" aria-hidden="true">
            <!-- Agitação -->
            <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
              <rect x="36" y="32" width="48" height="56" rx="10" fill="#f0f6fa" stroke="#013C5A" stroke-opacity=".12"/>
              <path d="M44 60c14 10 26 10 40 0" fill="none" stroke="#28a745" stroke-width="3" opacity=".8"/>
            </svg>
          </div>
          <div><strong>Agitação</strong><br/>Agitar manualmente por ~1 min. Em seguida, iniciar o cronômetro para leituras.</div>
          <input type="checkbox" class="ck" data-key="m2_ck11">
        </div>
      </div>

      <!-- B6 Leituras -->
      <div class="step">
        <span class="num">B6</span>
        <div class="step-body">
          <div class="illus" aria-hidden="true">
            <!-- Densímetro -->
            <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
              <rect x="48" y="24" width="24" height="72" rx="12" fill="#f0f6fa" stroke="#013C5A" stroke-opacity=".12"/>
              <rect x="54" y="30" width="12" height="36" rx="6" fill="#e6f2f9"/>
              <circle cx="60" cy="78" r="10" fill="#28a745" opacity=".9"/>
            </svg>
          </div>
          <div><strong>Leituras</strong><br/>Realizar leituras de densímetro e temperatura nos tempos padrão (ex.: 30 s, 1 min, 2 min, 5 min, 15 min, 30 min, 60 min, 2 h…).</div>
          <input type="checkbox" class="ck" data-key="m2_ck12">
        </div>
      </div>
    </div>

    <h3 style="margin-top:16px">Interatividade e anotações</h3>
    <div class="fields">
      <label>Tipo de solo e massa utilizada (70 g/120 g):</label>
      <textarea placeholder="Ex.: Silto-argiloso, 70 g"></textarea>
      <label>Tempos e densidades lidas (copiar da planilha):</label>
      <textarea placeholder="Ex.: 30 s → 24 g/L; 1 min → 22 g/L; ..."></textarea>
      <label>Observações de temperatura / pH:</label>
      <textarea placeholder="Ex.: T = 21 °C; pH = 8,5; sem bolhas."></textarea>
      <label>Conclusão: minha curva final indica um solo (bem/mal graduado) porque…</label>
      <textarea placeholder="Ex.: Curva suave com D10=0,25 mm e coef. uniformidade alto."></textarea>
    </div>

    <div class="note" style="margin-top:12px">
      <strong>Dicas profissionais:</strong> Limpe/escove as peneiras após cada ensaio; mantenha a ordem das peneiras; evite misturar frações; confira pH 8–9 e temperatura estável; evite bolhas no densímetro; respeite rigorosamente os tempos de leitura.
      <br><em>Curiosidade:</em> Um peneiramento bem executado melhora a precisão da curva e reduz erros de classificação.
    </div>

    <div class="actions" style="margin-top:16px">
      <a class="btn btn-prev" href="#mod1"><svg width="18" height="18" aria-hidden="true"><use href="#ico-arrow-left"/></svg> Voltar</a>
      <a class="btn btn-next" href="#mod3">Avançar <svg width="18" height="18" aria-hidden="true"><use href="#ico-arrow-right"/></svg></a>
    </div>
  </div>
</div>
</section>

  <!-- ===================== MÓDULO 3 ===================== -->
  <section id="mod3" class="module" aria-labelledby="mod3-title">
   <div class="panel" id="content-mod-3">
  <!-- Estilos locais do Módulo 3 -->
  <style>
    #content-mod-3 .illus { display:grid; place-items:center; margin:4px 0 12px; }
    #content-mod-3 .illus svg { width:92px; height:92px; transition:transform .2s ease; }
    #content-mod-3 .cardy { background:#fff; border-radius:16px; box-shadow:0 10px 30px rgba(1,60,90,.12); padding:18px; }
    #content-mod-3 h3 { color:#013C5A; font-family:Montserrat, sans-serif; margin:0 0 8px; }
    #content-mod-3 p.lead { color:#666; margin-top:6px; }
    #content-mod-3 .stack { display:grid; gap:14px; }
    #content-mod-3 .cta { display:flex; flex-wrap:wrap; gap:10px; margin-top:10px; align-items:center; }
    #content-mod-3 .btn-wa { background:#25D366; color:#fff; font-weight:800; padding:12px 16px; border-radius:12px; text-decoration:none; display:inline-flex; align-items:center; gap:8px; box-shadow:0 6px 20px rgba(37,211,102,.25); }
    #content-mod-3 .btn-wa:hover { filter:brightness(1.05); }
    #content-mod-3 .tips li { margin:6px 0; }
    #content-mod-3 .section { display:grid; grid-template-columns:1fr; gap:12px; }
    @media (min-width: 880px) { #content-mod-3 .section { grid-template-columns:1.1fr .9fr; } }
  </style>

  <header class="module-head">
    <span class="tag"><svg width="16" height="16" aria-hidden="true"><use href="#ico-whatsapp"/></svg> Módulo 3</span>
    <h2 id="mod3-title">Mentoria Técnica Personalizada (Bônus Exclusivo)</h2>
  </header>

  <!-- Seção 1 — Apresentação da Mentoria -->
  <div class="section">
    <div class="cardy">
      <div class="illus" aria-hidden="true">
        <!-- Ícone: Mentor + balão de conversa -->
        <svg viewBox="0 0 140 140" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="gMentor" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#e6f2f9"/><stop offset="1" stop-color="#f7fbff"/>
            </linearGradient>
          </defs>
          <!-- balão -->
          <rect x="18" y="22" width="84" height="52" rx="12" fill="url(#gMentor)" stroke="#013C5A" stroke-opacity=".12"/>
          <circle cx="42" cy="48" r="6" fill="#013C5A" opacity=".25"/>
          <circle cx="60" cy="48" r="6" fill="#013C5A" opacity=".25"/>
          <circle cx="78" cy="48" r="6" fill="#013C5A" opacity=".25"/>
          <path d="M40 74l12-8" stroke="#013C5A" stroke-opacity=".12"/>
          <!-- mentor -->
          <circle cx="104" cy="76" r="14" fill="#e9eef2"/>
          <rect x="90" y="90" width="28" height="22" rx="10" fill="#cfd8df"/>
          <rect x="86" y="106" width="36" height="12" rx="6" fill="#013C5A" opacity=".08"/>
        </svg>
      </div>
      <h3>Apresentação da Mentoria</h3>
      <p class="lead">
        Parabéns! Você chegou à parte mais importante do curso: o contato direto com o instrutor.
        Nesta sessão individual de até <strong>45 min</strong>, você revisa seus resultados, tira dúvidas e recebe dicas profissionais sobre o mercado de ensaios de solos.
        É o momento que transforma o aprendizado em prática real.
      </p>
      <div class="note">
        🌟 <strong>Dica:</strong> Traga seus resultados, dúvidas e até suas metas — vamos direcionar seu próximo passo com segurança técnica.
      </div>
    </div>

    <!-- Cartão lateral: relógio + duração -->
    <div class="cardy" style="align-self:start">
      <div class="illus" aria-hidden="true">
        <!-- Ícone: Relógio 45min -->
        <svg viewBox="0 0 140 140" xmlns="http://www.w3.org/2000/svg">
          <circle cx="70" cy="70" r="36" fill="#f0f6fa" stroke="#013C5A" stroke-opacity=".12"/>
          <line x1="70" y1="70" x2="70" y2="48" stroke="#013C5A" stroke-width="4" opacity=".6"/>
          <line x1="70" y1="70" x2="90" y2="70" stroke="#013C5A" stroke-width="4" opacity=".6"/>
          <circle cx="70" cy="70" r="5" fill="#28a745"/>
        </svg>
      </div>
      <h3>Duração & Formato</h3>
      <p class="lead">Sessão individual de até <strong>45 min</strong> via chamada. Foco total nas suas dúvidas e nos seus dados de ensaio.</p>
    </div>
  </div>

  <!-- Seção 2 — Agendamento pelo WhatsApp -->
  <div class="cardy" style="margin-top:12px">
    <div class="illus" aria-hidden="true">
      <!-- Ícone: WhatsApp estilizado -->
      <svg viewBox="0 0 140 140" xmlns="http://www.w3.org/2000/svg">
        <circle cx="70" cy="70" r="38" fill="#25D366" opacity=".9"/>
        <path d="M54 92l3.2-11.5A24 24 0 1 1 94 64a24 24 0 0 1-36 20.7L54 92z" fill="#fff" opacity=".15"/>
        <path d="M58 56c1-1 2-1 3 0l3 6c.4.8.2 1.7-.5 2.2l-1 1c-.2.2-.2.5 0 .7 4.2 5 9.2 8.1 12.7 9 .3.1.6 0 .8-.2l1.2-1.2c.5-.5 1.2-.6 1.9-.4l6.2 2c1 .3 1.4 1.6 1 2.5-1.1 2.4-4 4-6.7 4-6.5.5-12-2.5-18.9-8.2C56.8 68.1 55 62.6 56 56.3c.1-.2.2-.3.3-.3z" fill="#fff"/>
      </svg>
    </div>
    <h3>Agendamento pelo WhatsApp</h3>
    <p class="lead">
      Clique no botão abaixo para agendar sua aula ao vivo diretamente comigo.
      O WhatsApp abrirá com a mensagem pronta:
      <em>“Olá! Gostaria de agendar minha aula ao vivo do curso Ensaios de Solos – Volume 1.”</em>
    </p>
    <div class="cta">
      <a class="btn-wa" href="https://wa.me/5531987670863?text=Ol%C3%A1!%20Gostaria%20de%20agendar%20minha%20aula%20ao%20vivo%20do%20curso%20Ensaios%20de%20Solos%20-%20Volume%201." target="_blank" rel="noopener">
        <!-- mini ícone WA -->
        <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><use href="#ico-whatsapp"/></svg>
        📱 Agendar Aula ao Vivo
      </a>
      <span style="color:#666">Eu mesmo vou te responder e confirmar o melhor horário 🙂</span>
    </div>
  </div>

  <!-- Seção 3 — Dicas de Aproveitamento -->
  <div class="cardy" style="margin-top:12px">
    <div class="illus" aria-hidden="true">
      <!-- Ícone: Caderno / checklist -->
      <svg viewBox="0 0 140 140" xmlns="http://www.w3.org/2000/svg">
        <rect x="32" y="24" width="76" height="92" rx="12" fill="#ffffff" stroke="#013C5A" stroke-opacity=".12"/>
        <rect x="40" y="32" width="60" height="76" rx="8" fill="#f0f6fa"/>
        <g stroke="#28a745" stroke-width="3" opacity=".9">
          <path d="M48 52l6 6 12-12"/>
          <path d="M48 72l6 6 12-12"/>
          <path d="M48 92l6 6 12-12"/>
        </g>
      </svg>
    </div>
    <h3>Dicas de Aproveitamento</h3>
    <ul class="tips">
      <li>Tenha em mãos seus resultados e anotações.</li>
      <li>Liste dúvidas sobre os ensaios de <em>Umidade</em> e <em>Granulometria</em>.</li>
      <li>Se possível, envie fotos/vídeos das amostras e montagens.</li>
      <li>Deixe papel e caneta prontos — você vai sair com <strong>insights práticos</strong>.</li>
    </ul>
  </div>

  <div class="actions" style="margin-top:16px">
    <a class="btn btn-prev" href="#mod2"><svg width="18" height="18" aria-hidden="true"><use href="#ico-arrow-left"/></svg> Voltar</a>
    <a class="btn btn-next" href="#mod4">Avançar <svg width="18" height="18" aria-hidden="true"><use href="#ico-arrow-right"/></svg></a>
  </div>
</div>

  </section>

  <!-- ===================== MÓDULO 4 ===================== -->
  <section id="mod4" class="module" aria-labelledby="mod4-title">
   <div class="panel" id="content-mod-4">
  <!-- Estilos locais do Módulo 4 -->
  <style>
    #content-mod-4 .wrap { display:grid; grid-template-columns:1fr; gap:16px; }
    @media (min-width: 960px){ #content-mod-4 .wrap { grid-template-columns:1.1fr .9fr; } }
    #content-mod-4 h3 { color:#013C5A; font-family:Montserrat, sans-serif; margin:8px 0; }
    #content-mod-4 p.lead { color:#666; margin:6px 0 12px; }
    #content-mod-4 .cardy { background:#fff; border-radius:16px; box-shadow:0 10px 30px rgba(1,60,90,.12); padding:18px; }
    #content-mod-4 .illus { display:grid; place-items:center; margin:4px 0 12px; }
    #content-mod-4 .illus svg { width:96px; height:96px; transition:transform .2s ease; }
    #content-mod-4 .cardy:hover .illus svg { transform: translateY(-2px); }
    #content-mod-4 .fields { display:grid; gap:10px; }
    #content-mod-4 .fields label { font-weight:700; color:#0f2532; }
    #content-mod-4 .fields input[type="text"] { width:100%; padding:10px; border:1px solid rgba(1,60,90,.22); border-radius:10px; }
    #content-mod-4 .fields input[type="file"] { display:block; }
    #content-mod-4 .btn-cert { background:linear-gradient(180deg,#f7d36b,#e8b846); color:#2b1f00; font-weight:900; border:none; padding:12px 16px; border-radius:12px; cursor:pointer; box-shadow:0 8px 24px rgba(232,184,70,.35); }
    #content-mod-4 .btn-cert:hover { filter:brightness(1.03); }
    #content-mod-4 .cta-list { display:grid; grid-template-columns:1fr; gap:12px; }
    @media (min-width: 720px){ #content-mod-4 .cta-list { grid-template-columns:1fr 1fr; } }
    #content-mod-4 .btn-cta { background:#28a745; color:#fff; font-weight:800; padding:10px 14px; border-radius:12px; text-decoration:none; display:inline-flex; gap:8px; align-items:center; box-shadow:0 6px 20px rgba(40,167,69,.25); }
    #content-mod-4 .note { background:#fff9e6; border:1px solid #ffe5a3; border-radius:12px; padding:12px; }
  </style>

  <header class="module-head">
    <span class="tag"><svg width="16" height="16" aria-hidden="true"><use href="#ico-index"/></svg> Módulo 4</span>
    <h2 id="mod4-title">Certificação & Próximo Nível da sua Jornada</h2>
  </header>

  <div class="wrap">
    <!-- Coluna esquerda: Parabéns -->
    <div class="cardy">
      <div class="illus" aria-hidden="true">
        <!-- Medalha dourada -->
        <svg viewBox="0 0 150 150" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="gold1" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#ffe28a"/><stop offset="1" stop-color="#f0b945"/>
            </linearGradient>
            <linearGradient id="gold2" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#f9d46a"/><stop offset="1" stop-color="#e2a93a"/>
            </linearGradient>
          </defs>
          <path d="M75 10 L55 40 L75 52 L95 40 Z" fill="#013C5A" opacity=".95"/>
          <circle cx="75" cy="85" r="38" fill="url(#gold1)" stroke="#c28c2d" stroke-opacity=".5"/>
          <circle cx="75" cy="85" r="28" fill="url(#gold2)"/>
          <path d="M75 64l6 12 14 2-10 9 3 13-13-7-13 7 3-13-10-9 14-2z" fill="#fff0b8" opacity=".85"/>
        </svg>
      </div>
      <h3>Parabéns pela conclusão do Volume 1!</h3>
      <p class="lead">Você concluiu os fundamentos de <strong>Umidade Natural</strong> e <strong>Granulometria</strong>. Agora, avance para o próximo nível e consolide seu diferencial técnico.</p>
      <div class="note">Seu certificado será gerado em PDF com seu nome, data, código de verificação e assinatura digital — pronto para compartilhar.</div>
    </div>

    <!-- Coluna direita: CTA Volume 2 -->
    <div class="cardy" style="align-self:start">
      <div class="illus" aria-hidden="true">
        <!-- Alvo/crescimento -->
        <svg viewBox="0 0 150 150" xmlns="http://www.w3.org/2000/svg">
          <rect x="24" y="110" width="102" height="6" rx="3" fill="#e6eef4"/>
          <path d="M34 106 L50 88 L64 98 L80 74 L98 86 L116 60" fill="none" stroke="#28a745" stroke-width="5"/>
          <circle cx="116" cy="60" r="6" fill="#013C5A"/>
        </svg>
      </div>
      <h3>Próxima etapa</h3>
      <p class="lead"><strong>Volume 2 – Massa Específica Real dos Grãos e Limites de Atterberg</strong></p>
      <p class="lead" style="margin-top:-6px;color:#666">Domine limites de liquidez/plasticidade e densidade dos grãos — base para classificação e projetos.</p>
      <a class="btn-cta" href="#" onclick="alert('Em breve! Deixe seu interesse via WhatsApp.'); return false;">➡️ Quero avançar para o Volume 2</a>
    </div>
  </div>

  <!-- BLOCO DO CERTIFICADO (fica no FINAL, após o CTA) -->
  <div class="cardy" style="margin-top:12px">
    <h3>Gerar certificado em PDF</h3>
    <p class="lead">Preencha seu nome completo. Opcionalmente, carregue o <em>fundo do certificado em PNG</em> (o dourado do Canva). Se você não carregar, um layout dourado padrão será aplicado.</p>
    <div class="fields" aria-label="Gerar certificado">
      <label for="cert_nome">Nome e sobrenome</label>
      <input id="cert_nome" type="text" placeholder="Ex.: Diego Souza" autocomplete="name"/>

      <label for="cert_bg">Fundo do certificado (PNG do Canva)</label>
      <input id="cert_bg" type="file" accept="image/png" />
      <small style="color:#666">Dica: use o arquivo PNG A4 horizontal que criamos no Canva.</small>

      <button class="btn-cert" onclick="generateCertPDF()">📜 Gerar Certificado (PDF)</button>
    </div>
  </div>

  <div class="actions" style="margin-top:16px">
    <a class="btn btn-prev" href="#mod3"><svg width="18" height="18" aria-hidden="true"><use href="#ico-arrow-left"/></svg> Voltar</a>
    <a class="btn btn-next" href="#home">Voltar ao Início <svg width="18" height="18" aria-hidden="true"><use href="#ico-arrow-right"/></svg></a>
  </div>

  <!-- Script do Certificado -->
  <script>
    // Carrega jsPDF UMD se necessário
    async function ensureJSPDF(){
      if(window.jspdf && window.jspdf.jsPDF) return window.jspdf.jsPDF;
      await new Promise((res, rej)=>{
        const s=document.createElement('script');
        s.src='https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js';
        s.onload=()=>res(); s.onerror=()=>rej(new Error('Falha ao carregar jsPDF'));
        document.head.appendChild(s);
      });
      return window.jspdf.jsPDF;
    }

    // Lê o PNG do input e guarda como DataURL
    (function attachCertBgReader(){
      const input = document.getElementById('cert_bg');
      if(!input) return;
      input.addEventListener('change', ()=>{
        const f = input.files && input.files[0];
        if(!f) { window.CERT_BG_DATAURL = null; return; }
        const reader = new FileReader();
        reader.onload = e => { window.CERT_BG_DATAURL = e.target.result; };
        reader.readAsDataURL(f);
      });
    })();

    // Desenha um fundo dourado "fallback" (programático) quando não há PNG
    function drawFallbackGold(doc, W, H){
      // Fundo suave
      doc.setFillColor(248, 251, 255);
      doc.rect(0,0,W,H,'F');

      // Moldura dourada dupla
      const gold1 = [240,185,69], gold2=[255,226,138];
      doc.setDrawColor(...gold1); doc.setLineWidth(6);
      doc.roundedRect(28,28,W-56,H-56,14,14,'S');
      doc.setDrawColor(...gold2); doc.setLineWidth(2);
      doc.roundedRect(42,42,W-84,H-84,12,12,'S');

      // Medalha topo
      doc.setFillColor(1,60,90);
      doc.triangle(W/2-18,70, W/2+18,70, W/2,110, 'F');
      doc.setFillColor(...gold2); doc.circle(W/2,140,38,'F');
      doc.setFillColor(...gold1); doc.circle(W/2,140,28,'F');
    }

    // Gera o PDF (usa PNG do Canva se presente; senão, fallback dourado)
    async function generateCertPDF(){
      const nome = (document.getElementById('cert_nome').value||'').trim();
      if(!nome || nome.length < 3){ alert('Informe seu nome e sobrenome.'); return; }

      const jsPDF = await ensureJSPDF();
      const doc = new jsPDF({orientation:'landscape', unit:'pt', format:'a4'});

      const W = doc.internal.pageSize.getWidth();
      const H = doc.internal.pageSize.getHeight();

      // Se houver PNG do Canva, usar como background
      if(window.CERT_BG_DATAURL){
        // preencher a página inteira respeitando A4 horizontal
        try {
          doc.addImage(window.CERT_BG_DATAURL, 'PNG', 0, 0, W, H);
        } catch (e) {
          console.warn('Falha ao usar PNG; aplicando fallback', e);
          drawFallbackGold(doc, W, H);
        }
      } else {
        // Fallback programático
        drawFallbackGold(doc, W, H);
      }

      // Texto
      doc.setTextColor(1,60,90);
      doc.setFont('helvetica','bold'); doc.setFontSize(28);
      doc.text('Certificado de Conclusão', W/2, 190, {align:'center'});

      doc.setTextColor(27,31,35);
      doc.setFont('helvetica','bold'); doc.setFontSize(40);
      doc.text(nome, W/2, 250, {align:'center'});

      const body = 'Concluiu o curso Interativo — Ensaios de Solos (Volume 1), ' +
                   'abrangendo Teor de Umidade Natural e Granulometria (peneiramento + sedimentação), ' +
                   'demonstrando competência técnica fundamental em laboratório.';
      doc.setTextColor(1,60,90); doc.setFont('helvetica','normal'); doc.setFontSize(14);
      doc.text(doc.splitTextToSize(body, W-220), W/2, 290, {align:'center'});

      // Linha/assinatura/rodapé
      const yLine = H-140;
      doc.setDrawColor(200); doc.setLineWidth(1);
      doc.line(120, yLine, W-120, yLine);

      doc.setFont('helvetica','bold'); doc.setFontSize(12);
      doc.text('Diego R. Jesus — Instrutor Responsável', W/2, yLine+22,{align:'center'});
      doc.setFont('helvetica','normal');
      doc.text('Portal Interativo de Ensaios de Solos', W/2, yLine+38,{align:'center'});

      // Selo lateral
      doc.setFillColor(240,185,69); doc.circle(W-110, H-110, 30, 'F');
      doc.setFillColor(255,226,138); doc.circle(W-110, H-110, 20, 'F');

      // Data e verificação
      const data = new Date();
      const dd = String(data.getDate()).padStart(2,'0');
      const mm = String(data.getMonth()+1).padStart(2,'0');
      const yyyy = data.getFullYear();
      const dateStr = `${dd}/${mm}/${yyyy}`;
      const code = Math.random().toString(36).slice(2,10).toUpperCase();

      doc.setFontSize(11); doc.setTextColor(102);
      doc.text(`Data: ${dateStr}`, 120, H-90);
      doc.text(`Código de verificação: ${code}`, 120, H-72);

      // Rodapé
      doc.setTextColor(1,60,90); doc.setFontSize(10);
      doc.text('© Ensaios de Solos — Vol. 1', W-160, H-60);

      const safeName = nome.replace(/[^\p{L}\p{N}\s.-]/gu,'').trim() || 'Aluno';
      doc.save(`Certificado - ${safeName}.pdf`);
    }
  </script>
</div>

  </section>

  <footer class="site">
    <p>© <span id="year"></span> Curso Interativo – Ensaios de Solos (Vol. 1). Paleta: Azul #013C5A, Cinza #666666, Verde #28a745, Branco #FFFFFF · Fontes: Montserrat & Open Sans.</p>
  </footer>

  <script>
    // Ano atual
    document.getElementById('year').textContent = new Date().getFullYear();

    // Destacar link ativo no menu conforme rolagem
    const sections = ['home','index','mod0','mod1','mod2','mod3','mod4'].map(id=>document.getElementById(id));
    const links = Array.from(document.querySelectorAll('nav a.nav-link'));
    const byId = id => links.find(a => a.getAttribute('href') === `#${id}`);
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if(entry.isIntersecting){
          links.forEach(a => a.classList.remove('active'));
          const id = entry.target.id;
          const link = byId(id);
          if(link) link.classList.add('active');
          try { localStorage.setItem('last-section', `#${id}`); } catch(e){}
        }
      })
    }, { threshold: .5 });
    sections.forEach(sec => sec && observer.observe(sec));

    // Restaurar última seção visitada
    try {
      const last = localStorage.getItem('last-section');
      if(last && document.querySelector(last)){
        setTimeout(()=>{ location.hash = last; }, 200);
      }
    } catch(e){}

    // Teclas de atalho ← →
    const order = ['home','index','mod0','mod1','mod2','mod3','mod4'];
    function goto(delta){
      const current = location.hash ? location.hash.replace('#','') : 'home';
      const i = Math.max(0, order.indexOf(current));
      const j = Math.min(order.length - 1, Math.max(0, i + delta));
      const target = `#${order[j]}`;
      if(document.querySelector(target)) location.hash = target;
    }
    window.addEventListener('keydown', e => {
      if(['INPUT','TEXTAREA'].includes(document.activeElement.tagName)) return;
      if(e.key === 'ArrowRight') goto(+1);
      if(e.key === 'ArrowLeft') goto(-1);
    });

    // ===== Persistência para checklists =====
    function saveKV(key, value){ try{ localStorage.setItem(key, value); }catch(e){} }
    function loadKV(key){ try{ return localStorage.getItem(key); }catch(e){ return null } }
    function initChecks(){
      document.querySelectorAll('input.ck').forEach(el=>{
        const k = el.dataset.key; if(!k) return;
        const v = loadKV(k); if(v!==null) el.checked = v==='1';
        el.addEventListener('change', ()=> saveKV(k, el.checked?'1':'0'));
      })
    }

    // ===== Calculadora Umidade =====
    function val(id){ const el = document.getElementById(id); return el ? parseFloat((el.value||'').toString().replace(',','.')) : NaN }
    function calcUmidade(){
      const ml = val('m_lata'), mu = val('m_umida'), ms = val('m_seca');
      if([ml,mu,ms].some(x=>isNaN(x))){ document.getElementById('w_result').textContent = 'Preencha todos os campos (g).'; return; }
      const magua = mu - ms; const msecSolo = ms - ml; if(msecSolo<=0){ document.getElementById('w_result').textContent='Verifique as massas informadas.'; return; }
      const w = (magua / msecSolo) * 100; const out = `w = ${w.toFixed(2)} %`;
      document.getElementById('w_result').textContent = out; saveKV('m1_w', out);
    }
    function calcTripla(){
      const ids=['w1','w2','w3']; const a=ids.map(id=>val(id)).filter(x=>!isNaN(x));
      if(a.length<2){ document.getElementById('w_stats').textContent='Informe ao menos 2 valores.'; return; }
      const media = a.reduce((s,x)=>s+x,0)/a.length; const sd = Math.sqrt(a.reduce((s,x)=>s+(x-media)**2,0)/a.length);
      document.getElementById('w_stats').textContent = `média = ${media.toFixed(2)} % · desvio = ${sd.toFixed(2)} %`;
      saveKV('m1_w_media', media.toFixed(2));
    }

    // ===== Peneiramento =====
    const peneirasPadrao = ['4.8','2.0','0.84','0.42','0.25','0.15','0.075','Fundo'];
    function initPeneiras(){
      const tbody = document.querySelector('#tbPeneiras tbody'); if(!tbody) return; tbody.innerHTML='';
      peneirasPadrao.forEach(size=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${size} mm</td>
          <td style="padding:0;"><input type="number" step="0.01" style="width:100%; padding:8px 10px; border:0" data-size="${size}" class="mRetida"></td>
          <td class="pctR" style="text-align:right">–</td>
          <td class="pctP" style="text-align:right">–</td>`;
        tbody.appendChild(tr);
      });
    }
    function calcPeneiras(){
      const rows = Array.from(document.querySelectorAll('#tbPeneiras tbody tr')); if(!rows.length) return;
      const masses = rows.map(r=>parseFloat((r.querySelector('input.mRetida').value||'').replace(',','.'))||0);
      const total = masses.reduce((s,x)=>s+x,0);
      let passante = 100;
      rows.forEach((r,i)=>{
        const pctR = total>0 ? (masses[i]/total)*100 : 0;
        passante = i===0 ? 100 - pctR : passante - pctR;
        r.querySelector('.pctR').textContent = pctR.toFixed(2)+' %';
        r.querySelector('.pctP').textContent = passante.toFixed(2)+' %';
      });
      document.getElementById('sumPeneiras').textContent = total>0 ? `Massa total: ${total.toFixed(2)} g` : '';
      try{ saveKV('m2_peneiras', JSON.stringify(masses)); }catch(e){}
    }

    // ===== Sedimentação (hidrômetro) — leituras =====
    const temposPadrao = ['30 s','1 min','2 min','5 min','15 min','30 min','1 h','2 h'];
    function initHidro(){
      const tbody = document.querySelector('#tbHidro tbody'); if(!tbody) return; tbody.innerHTML='';
      temposPadrao.forEach(t=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${t}</td>
          <td style="padding:0;"><input type="number" step="0.001" style="width:100%; padding:8px 10px; border:0" class="hidro-leitura" data-t="${t}"></td>
          <td style="padding:0;"><input type="number" step="0.1" style="width:100%; padding:8px 10px; border:0" class="hidro-temp" data-t="${t}"></td>`;
        tbody.appendChild(tr);
      });
    }
    function saveHidro(){
      const linhas = Array.from(document.querySelectorAll('#tbHidro tbody tr'));
      const dados = linhas.map(r=>({
        tempo: r.children[0].textContent.trim(),
        leitura: parseFloat((r.querySelector('.hidro-leitura').value||'').replace(',','.'))||null,
        temp: parseFloat((r.querySelector('.hidro-temp').value||'').replace(',','.'))||null
      }));
      try{ saveKV('m2_hidro', JSON.stringify(dados)); }catch(e){}
      document.getElementById('sumHidro').textContent = 'Leituras salvas.';
    }

    // ===== Hidro — conversão simplificada e curva =====
    function mu_water_vogel(T){ return 2.414e-5 * Math.pow(10, 247.8/(T + 133.15)); } // Pa·s
    function rho_water(T){ return 998 - 0.3*(T-20); } // kg/m3 aprox
    function parseTempoToSeconds(t){
      if(!t) return null; const x=t.toLowerCase().trim();
      if(x.includes('h')) return parseFloat(x)*3600;
      if(x.includes('min')) return parseFloat(x)*60;
      if(x.includes('s')) return parseFloat(x);
      const n=parseFloat(x); return isNaN(n)?null:n;
    }

    let pontosHidro = []; // {d_mm, passante, tempo_s}
    let pontosPeneira = []; // {d_mm, passante}
    let curvaCombined = []; // {d_mm, passante}

    function readHidroTable(){
      const rows = Array.from(document.querySelectorAll('#tbHidro tbody tr'));
      return rows.map(r=>{
        const tempoTxt = r.children[0].textContent.trim();
        const leitura = parseFloat((r.querySelector('.hidro-leitura').value||'').replace(',','.'));
        const temp = parseFloat((r.querySelector('.hidro-temp').value||'').replace(',','.'));
        return {tempoTxt, leitura: isNaN(leitura)?null:leitura, temp: isNaN(temp)?null:temp};
      });
    }

    function converterHidro(){
      const Ws = parseFloat((document.getElementById('ws').value||'').replace(',','.'));
      const Gs = parseFloat((document.getElementById('gs').value||'').replace(',','.'));
      const Tinput = parseFloat((document.getElementById('temp').value||'').replace(',','.'));
      const L = parseFloat((document.getElementById('L').value||'').replace(',','.'));
      const Corr = parseFloat((document.getElementById('corr').value||'').replace(',','.'));
      if([Ws,Gs,Tinput,L].some(x=>isNaN(x)||x<=0)){ document.getElementById('convInfo').textContent='Informe Ws, Gs, T e L válidos.'; return; }

      const dados = readHidroTable().filter(r=>r.leitura!==null);
      if(!dados.length){ document.getElementById('convInfo').textContent='Informe ao menos uma leitura.'; return; }

      const g = 9.80665;
      pontosHidro = [];
      dados.forEach(row=>{
        const T = isNaN(row.temp)? Tinput : row.temp;
        const mu = mu_water_vogel(T);
        const rho_w = rho_water(T);
        const rho_s = Gs * rho_w;
        const delta = (rho_s - rho_w);
        const t = parseTempoToSeconds(row.tempoTxt) || 0;
        if(t<=0 || delta<=0) return;

        const D = Math.sqrt( (18 * mu * L) / (delta * g * t) ); // metros
        const d_mm = D * 1000;

        // % passante (didático, simplificado)
        const Rcorr = row.leitura + (isNaN(Corr)?0:Corr); // g/L aprox
        const P = ((Rcorr * (Gs/(Gs-1))) / Ws) * 100;

        if(!isNaN(d_mm) && !isNaN(P)){
          pontosHidro.push({d_mm, passante: Math.max(0, Math.min(100, P)), tempo_s:t});
        }
      });

      pontosHidro.sort((a,b)=>b.d_mm - a.d_mm);
      document.getElementById('convInfo').textContent = `Convertidos ${pontosHidro.length} pontos de sedimentação (simplificado).`;
    }

    function coletarPeneiramento(){
      const rows = Array.from(document.querySelectorAll('#tbPeneiras tbody tr'));
      const pts = [];
      rows.forEach(r=>{
        const sizeTxt = r.children[0].textContent.trim().replace(' mm','');
        let d_mm = (sizeTxt==='Fundo')? 0.01 : parseFloat(sizeTxt);
        if(isNaN(d_mm)) return;
        const pTxt = r.querySelector('.pctP').textContent.replace('%','').trim();
        const passante = parseFloat(pTxt);
        if(!isNaN(passante)){
          pts.push({d_mm, passante: Math.max(0, Math.min(100, passante))});
        }
      });
      return pts.sort((a,b)=>b.d_mm - a.d_mm);
    }

    function gerarCurva(){
      pontosPeneira = coletarPeneiramento();
      curvaCombined = [...pontosPeneira, ...pontosHidro].filter(p=>!isNaN(p.d_mm)&&!isNaN(p.passante));
      curvaCombined.sort((a,b)=>a.d_mm - b.d_mm);
      desenharCurva();
    }

    function desenharCurva(){
      const svg = document.getElementById('curvaSVG'); if(!svg) return;
      const W=800,H=360, padL=70, padR=20, padT=20, padB=40;
      while(svg.firstChild) svg.removeChild(svg.firstChild);

      const xMin=0.001, xMax=10; // mm
      const yMin=0, yMax=100;
      function xScale(v){ const t=(Math.log10(v)-Math.log10(xMin))/(Math.log10(xMax)-Math.log10(xMin)); return padL + t*(W-padL-padR); }
      function yScale(v){ const t=(v-yMin)/(yMax-yMin); return H-padB - t*(H-padT-padB); }

      // Grades verticais (décadas)
      const decades=[0.001,0.01,0.1,1,10];
      decades.forEach(val=>{
        const x=xScale(val);
        const ln=document.createElementNS(svg.namespaceURI,'line');
        ln.setAttribute('x1',x); ln.setAttribute('x2',x);
        ln.setAttribute('y1',padT); ln.setAttribute('y2',H-padB);
        ln.setAttribute('stroke','rgba(1,60,90,.15)'); svg.appendChild(ln);
        const tx=document.createElementNS(svg.namespaceURI,'text');
        tx.setAttribute('x',x); tx.setAttribute('y',H-10); tx.setAttribute('text-anchor','middle');
        tx.setAttribute('font-size','11'); tx.setAttribute('fill','#013C5A'); tx.textContent=val.toString(); svg.appendChild(tx);
      });
      // Grades horizontais (cada 20%)
      for(let v=0; v<=100; v+=20){
        const y=yScale(v);
        const ln=document.createElementNS(svg.namespaceURI,'line');
        ln.setAttribute('x1',padL); ln.setAttribute('x2',W-padR);
        ln.setAttribute('y1',y); ln.setAttribute('y2',y);
        ln.setAttribute('stroke','rgba(1,60,90,.12)'); svg.appendChild(ln);
        const tx=document.createElementNS(svg.namespaceURI,'text');
        tx.setAttribute('x',50); tx.setAttribute('y',y+4); tx.setAttribute('text-anchor','end');
        tx.setAttribute('font-size','11'); tx.setAttribute('fill','#013C5A'); tx.textContent=v+'%'; svg.appendChild(tx);
      }
      // Títulos
      const ylab=document.createElementNS(svg.namespaceURI,'text');
      ylab.setAttribute('x',18); ylab.setAttribute('y',H/2);
      ylab.setAttribute('transform','rotate(-90 18 '+(H/2)+')');
      ylab.setAttribute('font-size','12'); ylab.setAttribute('fill','#013C5A'); ylab.textContent='% passante'; svg.appendChild(ylab);
      const xlab=document.createElementNS(svg.namespaceURI,'text');
      xlab.setAttribute('x',(W/2)); xlab.setAttribute('y',H-8); xlab.setAttribute('text-anchor','middle');
      xlab.setAttribute('font-size','12'); xlab.setAttribute('fill','#013C5A'); xlab.textContent='tamanho (mm, eixo log)'; svg.appendChild(xlab);

      // Desenhar séries
      function drawSeries(arr, color, withLine){
        if(!arr.length) return;
        if(withLine){
          let d='';
          arr.forEach((p,i)=>{
            const x=xScale(Math.max(xMin, Math.min(xMax, p.d_mm)));
            const y=yScale(Math.max(0, Math.min(100, p.passante)));
            d += (i===0? 'M':'L') + x + ' ' + y + ' ';
          });
          const path=document.createElementNS(svg.namespaceURI,'path');
          path.setAttribute('d', d.trim());
          path.setAttribute('fill','none'); path.setAttribute('stroke', color); path.setAttribute('stroke-width','2');
          svg.appendChild(path);
        }
        arr.forEach(p=>{
          const x=xScale(Math.max(xMin, Math.min(xMax, p.d_mm)));
          const y=yScale(Math.max(0, Math.min(100, p.passante)));
          const c=document.createElementNS(svg.namespaceURI,'circle');
          c.setAttribute('cx',x); c.setAttribute('cy',y); c.setAttribute('r',3.5); c.setAttribute('fill', color);
          svg.appendChild(c);
        });
      }
      drawSeries(pontosPeneira, '#013C5A', true);
      drawSeries(pontosHidro, '#2a7f3e', false);
      drawSeries(curvaCombined, '#013C5A', true);
    }

    function exportCSV(){
      const rows=[['d_mm','passante','fonte']];
      pontosPeneira.forEach(p=>rows.push([p.d_mm, p.passante, 'peneiramento']));
      pontosHidro.forEach(p=>rows.push([p.d_mm, p.passante, 'sedimentacao']));
      curvaCombined.forEach(p=>rows.push([p.d_mm, p.passante, 'combinada']));
      const csv = rows.map(r=>r.join(',')).join('\n');
      const blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'curva_granulometrica.csv'; a.click();
      URL.revokeObjectURL(url);
    }

    // ===== Sedimentação helpers end =====

    // Boot
    initChecks();
  </script>
</body>
</html>
